<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <link rel="icon" href="/favicon.ico"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Volxel</title>
    <meta name="description" content="Demo for my volumetric data visualization tool called Volxel.">
    <meta property="og:title" content="Volxel">
    <meta property="og:description" content="Demo for my volumetric data visualization tool called Volxel.">
    <meta property="og:type" content="website">
    <meta name="twitter:title" content="Volxel">
    <meta name="twitter:description" content="Demo for my volumetric data visualization tool called Volxel.">
</head>
<body>
<main>
    <h1>Volxel 3D DICOM Data Visualizer Demo</h1>
    <details>
        <summary>
            <h2>What is this?</h2>
        </summary>
        <p>This is a demo for my volumetric data visualization tool called Volxel. You can find the source code <a
                href="https://github.com/Volxel/Volxel">on GitHub</a>.</p>
        <p>The actual use case is specifying a list of DICOM file <abbr title="Uniform Resource Locator">URL</abbr>s via
            the <code>data-urls</code> Attribute or
            the <abbr>URL</abbr> of a <abbr>ZIP</abbr> file containing multiple DICOM files via the
            <code>data-zip-url</code> attribute that the component will then
            use to fetch and display.
            This will be used by a <a href="https://github.com/Volxel/Volxel-Drupal">Drupal
                Module</a> to automatically load volumes to display.</p>
        <p>Additionally, the component also accepts the <code>data-settings-url</code> attribute, which it will use to
            restore the current view settings from, and the <code>data-env-url</code>, which it will use to load an
            environment map.</p>
        <p>You can try this demo by selecting a folder containing Dicom images in the file select below or by uploading
            a zip file containing DICOM images to the zip file select below.</p>
    </details>
    <details>
        <summary>
            <h2>How do I control this?</h2>
        </summary>
        <p>The main view can be panned by dragging with the left mouse button. To move the view around, you can hold
            <kbd>Shift</kbd> while dragging. You can zoom in and out by scrolling.</p>
        <p>The control panel is opened with the hamburger button on the bottom left. It contains three tabs for three
            different types of settings:</p>
        <ul>
            <li>
                <p>
                    The <b>Lighting</b> tab lets you control the lighting of the scene. There are two main options:
                </p>
                <ol>
                    <li>You can use an environment map (<abbr>.exr</abbr> file) which will be used to light the scene.
                    </li>
                    <li>You can use a directional light.</li>
                </ol>
                <p>
                    Using an environment map allows for more natural lighting at the expense of giving up directional
                    control.
                    Using directional lighting means less natural looking images, but more control, since it allows you
                    to move the light direction.
                </p>
                <p>
                    In directional lighting mode, you can also enable the <em>Backlight</em> mode, where the light
                    direction will always be the opposite of the view direction.
                </p>
                <p>
                    You can also prevent the environment from being shown, which will result in only the light from it
                    being used but the background remaining black.
                    This is useful in the event that the background interferes with the image.
                </p>
            </li>
            <li>
                <p>The <b>Transfer function</b> tab lets you control how the density data in the volume is interpreted.
                    This means:</p>
                <ul>
                    <li>You can upload a transfer function specified in a text file with lines containing <code>r g b
                        density</code> values in separate lines
                    </li>
                    <li>You can specify a density multiplier that gets applied to the data during rendering, which
                        allows you to make certain low visibility elements of the volume more visible
                    </li>
                    <li>You can adjust the density range of the volume that will be displayed. The diagram in the
                        background of this input shows a histogram of the density data. This means that the higher a
                        vertical line, the more often the corresponding density was present in the data. Left is a
                        density of 0, right a density of 1. The lines' heights scale logarithmically.
                    </li>
                </ul>
            </li>
            <li>The <b>Display</b> tab is less relevant for scientific users and more of interest to developers. You can
                adjust the maximum samples rendered for convergence, adjust how many bounces the volume path tracer
                takes, and you can enable showing the bounding box of the
                volume with the <abbr title="Axis Aligned Bounding Box">AABB</abbr> coordinates visualized as colors.
            </li>
        </ul>
        <p>
            The "Export" and "Import" buttons above the hamburger button allow you to import and export the entire view
            settings as a <abbr>JSON</abbr> file, which can later be reimported.
        </p>
    </details>
    <h2>Demo</h2>
    <div class="controls">
        <label>
            Select DICOM Files
            <input type="file" name="dicom" id="dicom" webkitdirectory>
        </label>
        <label>
            Select Zip File
            <input type="file" name="dicom" id="dicom_zip" accept="application/zip, application/x-zip-compressed">
        </label>
    </div>
    <volxel-3d-viewer id="renderer"></volxel-3d-viewer>
</main>
<script type="module" src="./src/main.ts"></script>
</body>
</html>
